package org.androidpn.util;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Message;

public class BmpDownloader implements Runnable{
	String url;
	public BmpDownloader(String url){
		this.url=url;
	}
	@Override
	public void run(){
		try {
			URL u = new URL(url);
			HttpURLConnection conn= (HttpURLConnection)u.openConnection();
			conn.setDoInput(true);
			conn.connect();
			InputStream inputStream=conn.getInputStream();
			Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
			
			File file = new File(dir +"/" + filename);  14.         try {   15.             file.createNewFile();   16.             OutputStream outStream = newFileOutputStream(file);  17.            bm.compress(Bitmap.CompressFormat.JPEG, 100, outStream);  18.             outStream.flush();  19.             outStream.close();   20.             Log.i(TAG, "Image saved tosd");  21.         } catch (FileNotFoundException e) {  22.             Log.w(TAG,"FileNotFoundException");  23.         } catch (IOException e) {  24.             Log.w(TAG,"IOException");  25.         }
			
		} catch (MalformedURLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
//		Message msg=new Message();
//		msg.what=1;
//		handler.sendMessage(msg);
	 }
}